<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quiz</title>
  </head>
  <body class="bg-light" x-data="demoQuizPage" x-init="init()">
    <header class="bg-white border-bottom">
      <div class="container py-3">
        <h1 class="h5 mb-2" x-text="title"></h1>
        <template x-if="quiz">
          <div class="progress" role="progressbar" :aria-valuenow="progressPercent()" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-bar" :style="`width: ${progressPercent()}%`"></div>
          </div>
        </template>
      </div>
    </header>

    <main class="container py-4">
      <div class="card">
        <div class="card-body">
          <h2 class="h6 mb-2" x-text="title"></h2>
          <div x-show="!quiz">
            <p class="text-muted">Loading quiz...</p>
          </div>

          <template x-if="quiz">
            <div>
              <div class="mb-3 text-muted small" x-text="`Question ${currentIndex + 1} of ${quiz.questions.length}`"></div>
              <form>
                <fieldset class="mb-3" x-show="currentQuestion">
                  <legend class="fw-medium" x-text="currentQuestion ? currentQuestion.question : ''"></legend>
                  <div>
                    <template x-for="(opt, oidx) in (currentQuestion ? currentQuestion.options : [])" :key="oidx">
                      <div class="form-check mb-2">
                        <input class="form-check-input" type="radio" :name="currentQuestion.id" :value="oidx" x-model="answers[currentQuestion.id]" />
                        <label class="form-check-label" x-text="opt"></label>
                      </div>
                    </template>
                  </div>
                </fieldset>
              </form>
              <div class="d-flex gap-2">
                <button class="btn btn-primary" @click="handleNext()" x-text="nextLabel()"></button>
                <a class="btn btn-outline-secondary" :href="courseLink">Back to course</a>
              </div>
            </div>
          </template>
        </div>
      </div>
    </main>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
